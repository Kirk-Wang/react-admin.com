<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Data Providers · React-Admin</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="React-admin can communicate with any API, whether it uses REST, GraphQL, or even SOAP, regardless of the dialect it uses. For REST servers, it can be [JSON API](http://jsonapi.org/), [HAL](http://stateless.co/hal_specification.html), [OData](http://www.odata.org/) or a custom dialect. The only thing react-admin needs is a Data Provider function. This is the place to translate data queries to HTTP requests, and HTTP responses to data responses."/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Data Providers · React-Admin"/><meta property="og:type" content="website"/><meta property="og:url" content="//index.html"/><meta property="og:description" content="React-admin can communicate with any API, whether it uses REST, GraphQL, or even SOAP, regardless of the dialect it uses. For REST servers, it can be [JSON API](http://jsonapi.org/), [HAL](http://stateless.co/hal_specification.html), [OData](http://www.odata.org/) or a custom dialect. The only thing react-admin needs is a Data Provider function. This is the place to translate data queries to HTTP requests, and HTTP responses to data responses."/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/img/favicon/favicon.ico"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/css/main.css"/></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/en"><img class="logo" src="/img/icon_common.png" alt="React-Admin"/><h2 class="headerTitleWithLogo">React-Admin</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/en/intro.html" target="_self">Doc</a></li><li class=""><a target="_self"></a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/img/language.svg"/>English</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/docs/zh-CN/data-providers.html">中文</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(event) {
          event.preventDefault();

          if (languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Knowledge</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Knowledge</h3><ul><li class="navListItem"><a class="navItem" href="/docs/en/intro.html">Introduction</a></li><li class="navListItem"><a class="navItem" href="/docs/en/tutorial.html">Tutorial</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/en/data-providers.html">Data Providers</a></li><li class="navListItem"><a class="navItem" href="/docs/en/admin-component.html">&lt;Admin&gt;</a></li><li class="navListItem"><a class="navItem" href="/docs/en/resource-component.html">&lt;Resource&gt;</a></li><li class="navListItem"><a class="navItem" href="/docs/en/list-view-component.html">&lt;List&gt; View</a></li><li class="navListItem"><a class="navItem" href="/docs/en/show-view-component.html">&lt;Show&gt; View</a></li><li class="navListItem"><a class="navItem" href="/docs/en/field-components.html">&lt;Field&gt; Components</a></li><li class="navListItem"><a class="navItem" href="/docs/en/creat-edit-view-components.html">&lt;Create&gt; and &lt;Edit&gt; Views</a></li><li class="navListItem"><a class="navItem" href="/docs/en/input-components.html">&lt;Input&gt; components</a></li><li class="navListItem"><a class="navItem" href="/docs/en/authentication.html">Authentication</a></li><li class="navListItem"><a class="navItem" href="/docs/en/authorization.html">Authorization</a></li><li class="navListItem"><a class="navItem" href="/docs/en/theming.html">Theming</a></li><li class="navListItem"><a class="navItem" href="/docs/en/actions.html">Writing Actions</a></li><li class="navListItem"><a class="navItem" href="/docs/en/translation.html">Translation</a></li><li class="navListItem"><a class="navItem" href="/docs/en/custom-app.html">Including the Admin in Another App</a></li><li class="navListItem"><a class="navItem" href="/docs/en/reference.html">Reference</a></li><li class="navListItem"><a class="navItem" href="/docs/en/faq.html">FAQ</a></li><li class="navListItem"><a class="navItem" href="/docs/en/ecosystem.html">Ecosystem</a></li></ul></div></div></section></div><script>
            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              const headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                if (event.target.tagName === 'A') {
                  document.body.classList.remove('tocActive');
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">Data Providers</h1></header><article><div><span><p>React-admin can communicate with any API, whether it uses REST, GraphQL, or even SOAP, regardless of the dialect it uses. For REST servers, it can be <a href="http://jsonapi.org/">JSON API</a>, <a href="http://stateless.co/hal_specification.html">HAL</a>, <a href="http://www.odata.org/">OData</a> or a custom dialect. The only thing react-admin needs is a Data Provider function. This is the place to translate data queries to HTTP requests, and HTTP responses to data responses.</p>
<p><img src="https://marmelab.com/react-admin/img/data-provider.png" alt="Data Provider architecture"></p>
<p>The <code>dataProvider</code> parameter of the <code>&lt;Admin&gt;</code> component must be a function with the following signature:</p>
<pre><code class="hljs css languages- jsx"><span class="hljs-comment">/**
 * Query a data provider and return a promise for a response
 *
 * @example
 * dataProvider(GET_ONE, 'posts', { id: 123 })
 *  =&gt; Promise.resolve({ data: { id: 123, title: "hello, world" } })
 *
 * @param {string} type Request type, e.g GET_LIST
 * @param {string} resource Resource name, e.g. "posts"
 * @param {Object} payload Request parameters. Depends on the action type
 * @returns {Promise} the Promise for a response
 */</span>
<span class="hljs-keyword">const</span> dataProvider = <span class="hljs-function">(<span class="hljs-params">type, resource, params</span>) =&gt;</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>();
</code></pre>
<p>You can find a Data Provider example implementation in <a href="https://github.com/marmelab/react-admin/blob/master/packages/ra-data-simple-rest/src/index.js"><code>packages/ra-data-simple-rest/src/index.js</code></a>;</p>
<p>The <code>dataProvider</code> is also the ideal place to add custom HTTP headers, authentication, etc.</p>
<h2><a class="anchor" aria-hidden="true" id="available-providers"></a><a href="#available-providers" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Available Providers</h2>
<p>The react-admin project includes 4 Data Providers:</p>
<ul>
<li>Simple REST: <a href="https://github.com/marmelab/react-admin/tree/master/packages/ra-data-simple-rest">marmelab/ra-data-simple-rest</a> (<a href="#simple-rest">read more below</a>). It serves mostly as an example. Incidentally, it is compatible with the <a href="https://github.com/marmelab/FakeRest">FakeRest</a> API.</li>
<li><strong><a href="https://github.com/typicode/json-server">JSON server</a></strong>: <a href="https://github.com/marmelab/react-admin/tree/master/packages/ra-data-json-server">marmelab/ra-data-json-server</a>. Great for prototyping an admin over a yet-to-be-developed REST API.</li>
<li><a href="https://www.graph.cool/">Graphcool</a>: <a href="https://github.com/marmelab/react-admin/tree/master/packages/ra-data-graphcool">marmelab/ra-data-graphcool</a>. A provider for GraphQL servers following the Graphcool convention. Incidentally, this package builds up on <a href="https://github.com/marmelab/react-admin/tree/master/packages/ra-data-graphql">marmelab/ra-data-graphql</a>, which lets you develop providers for other GraphQL conventions.</li>
<li>Local JSON: <a href="https://github.com/marmelab/react-admin/tree/master/packages/ra-data-fakerest">marmelab/ra-data-fakerest</a>. Based on a local object, it doesn't even use HTTP. Use it for testing purposes.</li>
</ul>
<p>You can find Data Providers for various backends in third-party repositories:</p>
<ul>
<li><strong><a href="https://github.com/abiglobalhealth/aor-dynamodb-client">DynamoDb</a></strong>: <a href="https://github.com/abiglobalhealth/aor-dynamodb-client">abiglobalhealth/aor-dynamodb-client</a></li>
<li><strong><a href="https://github.com/dchester/epilogue">Epilogue</a></strong>: <a href="https://github.com/dunghuynh/aor-epilogue-client">dunghuynh/aor-epilogue-client</a></li>
<li><strong><a href="http://www.feathersjs.com/">Feathersjs</a></strong>: <a href="https://github.com/josx/aor-feathers-client">josx/aor-feathers-client</a></li>
<li><strong><a href="https://firebase.google.com/">Firebase</a></strong>: <a href="https://github.com/sidferreira/aor-firebase-client">sidferreira/aor-firebase-client</a></li>
<li><strong><a href="http://jsonapi.org/">JSON API</a></strong>: <a href="https://github.com/moonlight-labs/aor-jsonapi-client">moonlight-labs/aor-jsonapi-client</a></li>
<li><strong><a href="http://loopback.io/">Loopback</a></strong>: <a href="https://github.com/kimkha/aor-loopback">kimkha/aor-loopback</a></li>
<li><strong><a href="https://github.com/ParsePlatform/parse-server">Parse Server</a></strong>: <a href="https://github.com/leperone/aor-parseserver-client">leperone/aor-parseserver-client</a></li>
<li><strong><a href="http://postgrest.com/en/v0.4/">PostgREST</a></strong>: <a href="https://github.com/tomberek/aor-postgrest-client">tomberek/aor-postgrest-client</a></li>
<li><strong><a href="https://github.com/o1lab/xmysql">Xmysql</a></strong>: <a href="https://github.com/soaserele/aor-xmysql">soaserele/aor-xmysql</a></li>
</ul>
<p>If you've written a Data Provider for another backend, and open-sourced it, please help complete this list with your package.</p>
<h2><a class="anchor" aria-hidden="true" id="usage"></a><a href="#usage" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Usage</h2>
<p>As an example, let's focus on the Simple REST data provider. It fits REST APIs using simple GET parameters for filters and sorting.</p>
<p>Install the <code>ra-data-simple-rest</code> package to use this provider.</p>
<pre><code class="hljs css languages- sh">npm install ra-data-simple-rest
</code></pre>
<p>Then, initialize the provider with the RESt backend URL, and pass the result to the <code>dataProvider</code> prop of the <code>&lt;Admin&gt;</code> component:</p>
<pre><code class="hljs css languages- jsx"><span class="hljs-comment">// in src/App.js</span>
<span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { Admin, Resource } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-admin'</span>;
<span class="hljs-keyword">import</span> simpleRestProvider <span class="hljs-keyword">from</span> <span class="hljs-string">'ra-data-simple-rest'</span>;

<span class="hljs-keyword">import</span> { PostList } <span class="hljs-keyword">from</span> <span class="hljs-string">'./posts'</span>;

<span class="hljs-keyword">const</span> App = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Admin</span> <span class="hljs-attr">dataProvider</span>=<span class="hljs-string">{simpleRestProvider(</span>'<span class="hljs-attr">http:</span>//<span class="hljs-attr">path.to.my.api</span>/')}&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Resource</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"posts"</span> <span class="hljs-attr">list</span>=<span class="hljs-string">{PostList}</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Admin</span>&gt;</span>
);

export default App;
</span></code></pre>
<p>Here is how this provider maps request types to API calls:</p>
<table>
<thead>
<tr><th>Request type</th><th>API calls</th></tr>
</thead>
<tbody>
<tr><td><code>GET_LIST</code></td><td><code>GET http://my.api.url/posts?sort=['title','ASC']&amp;range=[0, 24]&amp;filter={title:'bar'}</code></td></tr>
<tr><td><code>GET_ONE</code></td><td><code>GET http://my.api.url/posts/123</code></td></tr>
<tr><td><code>CREATE</code></td><td><code>POST http://my.api.url/posts/123</code></td></tr>
<tr><td><code>UPDATE</code></td><td><code>PUT http://my.api.url/posts/123</code></td></tr>
<tr><td><code>UPDATE_MANY</code></td><td>Multiple calls to <code>PUT http://my.api.url/posts/123</code></td></tr>
<tr><td><code>DELETE</code></td><td><code>DELETE http://my.api.url/posts/123</code></td></tr>
<tr><td><code>DELETE_MANY</code></td><td>Multiple calls to <code>DELETE http://my.api.url/posts/123</code></td></tr>
<tr><td><code>GET_MANY</code></td><td><code>GET http://my.api.url/posts?filter={ids:[123,456,789]}</code></td></tr>
<tr><td><code>GET_MANY_REFERENCE</code></td><td><code>GET http://my.api.url/posts?filter={author_id:345}</code></td></tr>
</tbody>
</table>
<p><strong>Note</strong>: The simple REST client expects the API to include a <code>Content-Range</code> header in the response to <code>GET_LIST</code> calls. The value must be the total number of resources in the collection. This allows react-admin to know how many pages of resources there are in total, and build the pagination controls.</p>
<pre><code class="hljs">Content-<span class="hljs-keyword">Range</span>: posts <span class="hljs-number">0</span>-<span class="hljs-number">24</span>/<span class="hljs-number">319</span>
</code></pre>
<p>If your API is on another domain as the JS code, you'll need to whitelist this header with an <code>Access-Control-Expose-Headers</code> <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Access_control_CORS">CORS</a> header.</p>
<pre><code class="hljs"><span class="hljs-keyword">Access</span>-Control-Expose-Headers: Content-<span class="hljs-keyword">Range</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="adding-custom-headers"></a><a href="#adding-custom-headers" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Adding Custom Headers</h2>
<p>The <code>simpleRestProvider</code> function accepts an HTTP client function as second argument. By default, it uses react-admin's <code>fetchUtils.fetchJson()</code> as HTTP client. It's similar to HTML5 <code>fetch()</code>, except it handles JSON decoding and HTTP error codes automatically.</p>
<p>That means that if you need to add custom headers to your requests, you can just <em>wrap</em> the <code>fetchJson()</code> call inside your own function:</p>
<pre><code class="hljs css languages- jsx"><span class="hljs-keyword">import</span> { fetchUtils, Admin, Resource } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-admin'</span>;
<span class="hljs-keyword">import</span> simpleRestProvider <span class="hljs-keyword">from</span> <span class="hljs-string">'ra-data-simple-rest'</span>;

<span class="hljs-keyword">const</span> httpClient = <span class="hljs-function">(<span class="hljs-params">url, options = {}</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (!options.headers) {
        options.headers = <span class="hljs-keyword">new</span> Headers({ <span class="hljs-attr">Accept</span>: <span class="hljs-string">'application/json'</span> });
    }
    <span class="hljs-comment">// add your own headers here</span>
    options.headers.set(<span class="hljs-string">'X-Custom-Header'</span>, <span class="hljs-string">'foobar'</span>);
    <span class="hljs-keyword">return</span> fetchUtils.fetchJson(url, options);
}
<span class="hljs-keyword">const</span> dataProvider = simpleRestProvider(<span class="hljs-string">'http://path.to.my.api/'</span>, httpClient);

<span class="hljs-keyword">const</span> App = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Admin</span> <span class="hljs-attr">dataProvider</span>=<span class="hljs-string">{dataProvider}</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Resource</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"posts"</span> <span class="hljs-attr">list</span>=<span class="hljs-string">{PostList}</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Admin</span>&gt;</span>
);
</span></code></pre>
<p>Now all the requests to the REST API will contain the <code>X-Custom-Header: foobar</code> header.</p>
<p><strong>Tip</strong>: The most common usage of custom headers is for authentication. <code>fetchJson</code> has built-on support for the <code>Authorization</code> token header:</p>
<pre><code class="hljs css languages- jsx"><span class="hljs-keyword">const</span> httpClient = <span class="hljs-function">(<span class="hljs-params">url, options = {}</span>) =&gt;</span> {
    options.user = {
        <span class="hljs-attr">authenticated</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">token</span>: <span class="hljs-string">'SRTRDFVESGNJYTUKTYTHRG'</span>
    }
    <span class="hljs-keyword">return</span> fetchUtils.fetchJson(url, options);
}
<span class="hljs-keyword">const</span> dataProvider = simpleRestProvider(<span class="hljs-string">'http://path.to.my.api/'</span>, httpClient);
</code></pre>
<p>Now all the requests to the REST API will contain the <code>Authorization: SRTRDFVESGNJYTUKTYTHRG</code> header.</p>
<h2><a class="anchor" aria-hidden="true" id="decorating-your-data-provider-example-of-file-upload"></a><a href="#decorating-your-data-provider-example-of-file-upload" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Decorating your Data Provider (Example of File Upload)</h2>
<p>Instead of writing your own Data Provider, you can enhance the capabilities of an existing data provider. You can even restrict the customization on a given resource.</p>
<p>For instance, if you want to use upload components (such as <code>&lt;ImageInput /&gt;</code> one), you can decorate the provider the following way:</p>
<pre><code class="hljs css languages- jsx"><span class="hljs-comment">// in addUploadFeature.js</span>
<span class="hljs-comment">/**
 * Convert a `File` object returned by the upload input into a base 64 string.
 * That's not the most optimized way to store images in production, but it's
 * enough to illustrate the idea of data provider decoration.
 */</span>
<span class="hljs-keyword">const</span> convertFileToBase64 = <span class="hljs-function"><span class="hljs-params">file</span> =&gt;</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> reader = <span class="hljs-keyword">new</span> FileReader();
    reader.readAsDataURL(file.rawFile);

    reader.onload = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> resolve(reader.result);
    reader.onerror = reject;
});

<span class="hljs-comment">/**
 * For posts update only, convert uploaded image in base 64 and attach it to
 * the `picture` sent property, with `src` and `title` attributes.
 */</span>
<span class="hljs-keyword">const</span> addUploadFeature = <span class="hljs-function"><span class="hljs-params">requestHandler</span> =&gt;</span> (type, resource, params) =&gt; {
    <span class="hljs-keyword">if</span> (type === <span class="hljs-string">'UPDATE'</span> &amp;&amp; resource === <span class="hljs-string">'posts'</span>) {
        <span class="hljs-keyword">if</span> (params.data.pictures &amp;&amp; params.data.pictures.length) {
            <span class="hljs-comment">// only freshly dropped pictures are instance of File</span>
            <span class="hljs-keyword">const</span> formerPictures = params.data.pictures.filter(p.rawFile =&gt; !(p <span class="hljs-keyword">instanceof</span> File));
            <span class="hljs-keyword">const</span> newPictures = params.data.pictures.filter(p.rawFile =&gt; p <span class="hljs-keyword">instanceof</span> File);

            <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.all(newPictures.map(convertFileToBase64))
                .then(<span class="hljs-function"><span class="hljs-params">base64Pictures</span> =&gt;</span> base64Pictures.map(<span class="hljs-function"><span class="hljs-params">picture64</span> =&gt;</span> ({
                    <span class="hljs-attr">src</span>: picture64,
                    <span class="hljs-attr">title</span>: <span class="hljs-string">`<span class="hljs-subst">${params.data.title}</span>`</span>,
                })))
                .then(<span class="hljs-function"><span class="hljs-params">transformedNewPictures</span> =&gt;</span> requestHandler(type, resource, {
                    ...params,
                    <span class="hljs-attr">data</span>: {
                        ...params.data,
                        <span class="hljs-attr">pictures</span>: [...transformedNewPictures, ...formerPictures],
                    },
                }));
        }
    }
    <span class="hljs-comment">// for other request types and reources, fall back to the defautl request handler</span>
    <span class="hljs-keyword">return</span> requestHandler(type, resource, params);
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> addUploadFeature;
</code></pre>
<p>To enhance a provider with the upload feature, compose <code>addUploadFeature</code> function with the data provider function:</p>
<pre><code class="hljs css languages- jsx"><span class="hljs-keyword">import</span> simpleRestProvider <span class="hljs-keyword">from</span> <span class="hljs-string">'ra-data-simple-rest'</span>;
<span class="hljs-keyword">import</span> addUploadFeature <span class="hljs-keyword">from</span> <span class="hljs-string">'./addUploadFeature'</span>;

<span class="hljs-keyword">const</span> dataProvider = simpleRestProvider(<span class="hljs-string">'http://path.to.my.api/'</span>);
<span class="hljs-keyword">const</span> uploadCapableDataProvider = addUploadFeature(dataProvider);

<span class="hljs-keyword">const</span> App = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Admin</span> <span class="hljs-attr">dataProvider</span>=<span class="hljs-string">{uploadCapableDataProvider}</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Resource</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"posts"</span> <span class="hljs-attr">list</span>=<span class="hljs-string">{PostList}</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Admin</span>&gt;</span>
);
</span></code></pre>
<h2><a class="anchor" aria-hidden="true" id="writing-your-own-data-provider"></a><a href="#writing-your-own-data-provider" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Writing Your Own Data Provider</h2>
<p>Quite often, there is no Data Provider that suits you API - either in the core providers, or in the third-party providers. In such cases, you'll have to write your own Data Provider.</p>
<p>A Data Provider is a function that receives a request, and returns a promise for a response. Both the request and the response format are standardized.</p>
<pre><code class="hljs css languages- jsx"><span class="hljs-comment">/**
 * Query a data provider and return a promise for a response
 *
 * @example
 * dataProvider(GET_ONE, 'posts', { id: 123 })
 *  =&gt; Promise.resolve({ data: { id: 123, title: "hello, world" } })
 *
 * @param {string} type Request type, e.g GET_LIST
 * @param {string} resource Resource name, e.g. "posts"
 * @param {Object} payload Request parameters. Depends on the action type
 * @returns {Promise} the Promise for a response
 */</span>
<span class="hljs-keyword">const</span> dataProvider = <span class="hljs-function">(<span class="hljs-params">type, resource, params</span>) =&gt;</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>();
</code></pre>
<p>When you write a Data provider, your job is to route requests to your API backend(s), then transform their response to match the format returned by the Data Provider.</p>
<h3><a class="anchor" aria-hidden="true" id="request-format"></a><a href="#request-format" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Request Format</h3>
<p>Data queries require a <em>type</em> (e.g. <code>GET_ONE</code>), a <em>resource</em> (e.g. 'posts') and a set of <em>parameters</em>.</p>
<p><em>Tip</em>: In comparison, HTTP requests require a <em>verb</em> (e.g. 'GET'), an <em>url</em> (e.g. '<a href="http://myapi.com/posts'">http://myapi.com/posts'</a>), a list of <em>headers</em> (like <code>Content-Type</code>) and a <em>body</em>.</p>
<p>Possible types are:</p>
<table>
<thead>
<tr><th>Type</th><th>Usage</th><th>Params format</th></tr>
</thead>
<tbody>
<tr><td><code>GET_LIST</code></td><td>Search for resources</td><td><code>{ pagination: { page: {int} , perPage: {int} }, sort: { field: {string}, order: {string} }, filter: {Object} }</code></td></tr>
<tr><td><code>GET_ONE</code></td><td>Read a single resource, by id</td><td><code>{ id: {mixed} }</code></td></tr>
<tr><td><code>CREATE</code></td><td>Create a single resource</td><td><code>{ data: {Object} }</code></td></tr>
<tr><td><code>UPDATE</code></td><td>Update a single resource</td><td><code>{ id: {mixed}, data: {Object}, previousData: {Object} }</code></td></tr>
<tr><td><code>UPDATE_MANY</code></td><td>Update multiple resources</td><td><code>{ ids: {mixed[]}, data: {Object} }</code></td></tr>
<tr><td><code>DELETE</code></td><td>Delete a single resource</td><td><code>{ id: {mixed}, previousData: {Object} }</code></td></tr>
<tr><td><code>DELETE_MANY</code></td><td>Delete multiple resources</td><td><code>{ ids: {mixed[]} }</code></td></tr>
<tr><td><code>GET_MANY</code></td><td>Read a list of resource, by ids</td><td><code>{ ids: {mixed[]} }</code></td></tr>
<tr><td><code>GET_MANY_REFERENCE</code></td><td>Read a list of resources related to another one</td><td><code>{ target: {string}, id: {mixed}, pagination: { page: {int} , perPage: {int} }, sort: { field: {string}, order: {string} }, filter: {Object} }</code></td></tr>
</tbody>
</table>
<p>Here are several examples of how react-admin can call the Data Provider with these types:</p>
<pre><code class="hljs css languages- jsx">dataProvider(GET_LIST, <span class="hljs-string">'posts'</span>, {
    <span class="hljs-attr">pagination</span>: { <span class="hljs-attr">page</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">perPage</span>: <span class="hljs-number">5</span> },
    <span class="hljs-attr">sort</span>: { <span class="hljs-attr">field</span>: <span class="hljs-string">'title'</span>, <span class="hljs-attr">order</span>: <span class="hljs-string">'ASC'</span> },
    <span class="hljs-attr">filter</span>: { <span class="hljs-attr">author_id</span>: <span class="hljs-number">12</span> },
});
dataProvider(GET_ONE, <span class="hljs-string">'posts'</span>, { <span class="hljs-attr">id</span>: <span class="hljs-number">123</span> });
dataProvider(CREATE, <span class="hljs-string">'posts'</span>, { <span class="hljs-attr">data</span>: { <span class="hljs-attr">title</span>: <span class="hljs-string">"hello, world"</span> } });
dataProvider(UPDATE, <span class="hljs-string">'posts'</span>, {
    <span class="hljs-attr">id</span>: <span class="hljs-number">123</span>,
    <span class="hljs-attr">data</span>: { <span class="hljs-attr">title</span>: <span class="hljs-string">"hello, world!"</span> },
    <span class="hljs-attr">previousData</span>: { <span class="hljs-attr">title</span>: <span class="hljs-string">"previous title"</span> }
});
dataProvider(UPDATE_MANY, <span class="hljs-string">'posts'</span>, {
    <span class="hljs-attr">ids</span>: [<span class="hljs-number">123</span>, <span class="hljs-number">234</span>],
    <span class="hljs-attr">data</span>: { <span class="hljs-attr">views</span>: <span class="hljs-number">0</span> },
});
dataProvider(DELETE, <span class="hljs-string">'posts'</span>, {
    <span class="hljs-attr">id</span>: <span class="hljs-number">123</span>,
    <span class="hljs-attr">previousData</span>: { <span class="hljs-attr">title</span>: <span class="hljs-string">"hello, world"</span> }
});
dataProvider(DELETE_MANY, <span class="hljs-string">'posts'</span>, { <span class="hljs-attr">ids</span>: [<span class="hljs-number">123</span>, <span class="hljs-number">234</span>] });
dataProvider(GET_MANY, <span class="hljs-string">'posts'</span>, { <span class="hljs-attr">ids</span>: [<span class="hljs-number">123</span>, <span class="hljs-number">124</span>, <span class="hljs-number">125</span>] });
dataProvider(GET_MANY_REFERENCE, <span class="hljs-string">'comments'</span>, {
    <span class="hljs-attr">target</span>: <span class="hljs-string">'post_id'</span>,
    <span class="hljs-attr">id</span>: <span class="hljs-number">123</span>,
    <span class="hljs-attr">sort</span>: { <span class="hljs-attr">field</span>: <span class="hljs-string">'created_at'</span>, <span class="hljs-attr">order</span>: <span class="hljs-string">'DESC'</span> }
});
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="example-request-processing"></a><a href="#example-request-processing" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example Request Processing</h3>
<p>Let's say that you want to map the Data Provider requests to a REST backend, like so:</p>
<ul>
<li><code>GET_LIST =&gt; GET http://path.to.my.api/posts?sort=[&quot;title&quot;,&quot;ASC&quot;]&amp;range=[0, 24]&amp;filter={&quot;author_id&quot;:12}</code></li>
<li><code>GET_ONE =&gt; GET http://path.to.my.api/posts/123</code></li>
<li><code>CREATE =&gt; POST http://path.to.my.api/posts</code></li>
<li><code>UPDATE =&gt; PUT http://path.to.my.api/posts/123</code></li>
<li><code>UPDATE_MANY =&gt; PUT http://path.to.my.api/posts?filter={&quot;ids&quot;:[123,124,125]}</code></li>
<li><code>DELETE =&gt; DELETE http://path.to.my.api/posts/123</code></li>
<li><code>DELETE_MANY =&gt; DELETE http://path.to.my.api/posts?filter={&quot;ids&quot;:[123,124,125]}</code></li>
<li><code>GET_MANY =&gt; GET http://path.to.my.api/posts?filter={&quot;ids&quot;:[123,124,125]}</code></li>
<li><code>GET_MANY_REFERENCE =&gt; GET http://path.to.my.api/comments?sort=[&quot;created_at&quot;,&quot;DESC&quot;]&amp;range=[0, 24]&amp;filter={&quot;post_id&quot;:123}</code></li>
</ul>
<p>Data Providers often use a <code>switch</code> statement, and finish by a call to <code>fetch()</code>. Here is an example implementation:</p>
<pre><code class="hljs css languages- js"><span class="hljs-comment">// in myRestProvider.js</span>
<span class="hljs-keyword">import</span> { stringify } <span class="hljs-keyword">from</span> <span class="hljs-string">'query-string'</span>;
<span class="hljs-keyword">import</span> {
    GET_LIST,
    GET_ONE,
    CREATE,
    UPDATE,
    DELETE,
    GET_MANY,
    GET_MANY_REFERENCE,
} <span class="hljs-keyword">from</span> <span class="hljs-string">'react-admin'</span>;

<span class="hljs-keyword">const</span> apiUrl = <span class="hljs-string">'http://path.to.my.api/'</span>;

<span class="hljs-comment">/**
 * Maps react-admin queries to my REST API
 *
 * @param {string} type Request type, e.g GET_LIST
 * @param {string} resource Resource name, e.g. "posts"
 * @param {Object} payload Request parameters. Depends on the request type
 * @returns {Promise} the Promise for a data response
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> (type, resource, params) =&gt; {
    <span class="hljs-keyword">let</span> url = <span class="hljs-string">''</span>;
    <span class="hljs-keyword">const</span> options = { 
        <span class="hljs-attr">headers</span> : <span class="hljs-keyword">new</span> Headers({
            <span class="hljs-attr">Accept</span>: <span class="hljs-string">'application/json'</span>,
        }),
    };
    <span class="hljs-keyword">switch</span> (type) {
        <span class="hljs-keyword">case</span> GET_LIST: {
            <span class="hljs-keyword">const</span> { page, perPage } = params.pagination;
            <span class="hljs-keyword">const</span> { field, order } = params.sort;
            <span class="hljs-keyword">const</span> query = {
                <span class="hljs-attr">sort</span>: <span class="hljs-built_in">JSON</span>.stringify([field, order]),
                <span class="hljs-attr">range</span>: <span class="hljs-built_in">JSON</span>.stringify([
                    (page - <span class="hljs-number">1</span>) * perPage,
                    page * perPage - <span class="hljs-number">1</span>,
                ]),
                <span class="hljs-attr">filter</span>: <span class="hljs-built_in">JSON</span>.stringify(params.filter),
            };
            url = <span class="hljs-string">`<span class="hljs-subst">${apiUrl}</span>/<span class="hljs-subst">${resource}</span>?<span class="hljs-subst">${stringify(query)}</span>`</span>;
            <span class="hljs-keyword">break</span>;
        }
        <span class="hljs-keyword">case</span> GET_ONE:
            url = <span class="hljs-string">`<span class="hljs-subst">${apiUrl}</span>/<span class="hljs-subst">${resource}</span>/<span class="hljs-subst">${params.id}</span>`</span>;
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> CREATE:
            url = <span class="hljs-string">`<span class="hljs-subst">${apiUrl}</span>/<span class="hljs-subst">${resource}</span>`</span>;
            options.method = <span class="hljs-string">'POST'</span>;
            options.body = <span class="hljs-built_in">JSON</span>.stringify(params.data);
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> UPDATE:
            url = <span class="hljs-string">`<span class="hljs-subst">${apiUrl}</span>/<span class="hljs-subst">${resource}</span>/<span class="hljs-subst">${params.id}</span>`</span>;
            options.method = <span class="hljs-string">'PUT'</span>;
            options.body = <span class="hljs-built_in">JSON</span>.stringify(params.data);
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> UPDATE_MANY:
            <span class="hljs-keyword">const</span> query = {
                <span class="hljs-attr">filter</span>: <span class="hljs-built_in">JSON</span>.stringify({ <span class="hljs-attr">id</span>: params.ids }),
            };
            url = <span class="hljs-string">`<span class="hljs-subst">${apiUrl}</span>/<span class="hljs-subst">${resource}</span>?<span class="hljs-subst">${stringify(query)}</span>`</span>;
            options.method = <span class="hljs-string">'PATCH'</span>;
            options.body = <span class="hljs-built_in">JSON</span>.stringify(params.data);
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> DELETE:
            url = <span class="hljs-string">`<span class="hljs-subst">${apiUrl}</span>/<span class="hljs-subst">${resource}</span>/<span class="hljs-subst">${params.id}</span>`</span>;
            options.method = <span class="hljs-string">'DELETE'</span>;
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> DELETE_MANY:
            <span class="hljs-keyword">const</span> query = {
                <span class="hljs-attr">filter</span>: <span class="hljs-built_in">JSON</span>.stringify({ <span class="hljs-attr">id</span>: params.ids }),
            };
            url = <span class="hljs-string">`<span class="hljs-subst">${apiUrl}</span>/<span class="hljs-subst">${resource}</span>?<span class="hljs-subst">${stringify(query)}</span>`</span>;
            options.method = <span class="hljs-string">'DELETE'</span>;
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> GET_MANY: {
            <span class="hljs-keyword">const</span> query = {
                <span class="hljs-attr">filter</span>: <span class="hljs-built_in">JSON</span>.stringify({ <span class="hljs-attr">id</span>: params.ids }),
            };
            url = <span class="hljs-string">`<span class="hljs-subst">${apiUrl}</span>/<span class="hljs-subst">${resource}</span>?<span class="hljs-subst">${stringify(query)}</span>`</span>;
            <span class="hljs-keyword">break</span>;
        }
        <span class="hljs-keyword">case</span> GET_MANY_REFERENCE: {
            <span class="hljs-keyword">const</span> { page, perPage } = params.pagination;
            <span class="hljs-keyword">const</span> { field, order } = params.sort;
            <span class="hljs-keyword">const</span> query = {
                <span class="hljs-attr">sort</span>: <span class="hljs-built_in">JSON</span>.stringify([field, order]),
                <span class="hljs-attr">range</span>: <span class="hljs-built_in">JSON</span>.stringify([
                    (page - <span class="hljs-number">1</span>) * perPage,
                    page * perPage - <span class="hljs-number">1</span>,
                ]),
                <span class="hljs-attr">filter</span>: <span class="hljs-built_in">JSON</span>.stringify({
                    ...params.filter,
                    [params.target]: params.id,
                }),
            };
            url = <span class="hljs-string">`<span class="hljs-subst">${apiUrl}</span>/<span class="hljs-subst">${resource}</span>?<span class="hljs-subst">${stringify(query)}</span>`</span>;
            <span class="hljs-keyword">break</span>;
        }
        <span class="hljs-keyword">default</span>:
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">`Unsupported Data Provider request type <span class="hljs-subst">${type}</span>`</span>);
    }

    <span class="hljs-keyword">return</span> fetch(url, options)
        .then(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> res.json())
        .then(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span>
            <span class="hljs-comment">/* Convert HTTP Response to Data Provider Response */</span>
            <span class="hljs-comment">/* Covered in the next section */</span>
        );
};
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="response-format"></a><a href="#response-format" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Response Format</h3>
<p>React-admin expects responses from Data Providers to be objects with a <code>data</code> property. The data format depends on the request type.</p>
<table>
<thead>
<tr><th>Request Type</th><th>Response format</th></tr>
</thead>
<tbody>
<tr><td><code>GET_LIST</code></td><td><code>{ data: {Record[]}, total: {int} }</code></td></tr>
<tr><td><code>GET_ONE</code></td><td><code>{ data: {Record} }</code></td></tr>
<tr><td><code>CREATE</code></td><td><code>{ data: {Record} }</code></td></tr>
<tr><td><code>UPDATE</code></td><td><code>{ data: {Record} }</code></td></tr>
<tr><td><code>UPDATE_MANY</code></td><td><code>{ data: {mixed[]} }</code> The ids which have been updated</td></tr>
<tr><td><code>DELETE</code></td><td><code>{ data: {Record} }</code></td></tr>
<tr><td><code>DELETE_MANY</code></td><td><code>{ data: {mixed[]} }</code> The ids which have been deleted</td></tr>
<tr><td><code>GET_MANY</code></td><td><code>{ data: {Record[]} }</code></td></tr>
<tr><td><code>GET_MANY_REFERENCE</code></td><td><code>{ data: {Record[]}, total: {int} }</code></td></tr>
</tbody>
</table>
<p>A <code>{Record}</code> is an object literal with at least an <code>id</code> property, e.g. <code>{ id: 123, title: &quot;hello, world&quot; }</code>.</p>
<p>Building up on the previous example, here are example responses matching the format expected by react-admin:</p>
<pre><code class="hljs css languages- jsx">dataProvider(GET_LIST, <span class="hljs-string">'posts'</span>, {
    <span class="hljs-attr">pagination</span>: { <span class="hljs-attr">page</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">perPage</span>: <span class="hljs-number">5</span> },
    <span class="hljs-attr">sort</span>: { <span class="hljs-attr">field</span>: <span class="hljs-string">'title'</span>, <span class="hljs-attr">order</span>: <span class="hljs-string">'ASC'</span> },
    <span class="hljs-attr">filter</span>: { <span class="hljs-attr">author_id</span>: <span class="hljs-number">12</span> },
})
.then(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> <span class="hljs-built_in">console</span>.log(response));
<span class="hljs-comment">// {</span>
<span class="hljs-comment">//     data: [</span>
<span class="hljs-comment">//         { id: 126, title: "allo?", author_id: 12 },</span>
<span class="hljs-comment">//         { id: 127, title: "bien le bonjour", author_id: 12 },</span>
<span class="hljs-comment">//         { id: 124, title: "good day sunshine", author_id: 12 },</span>
<span class="hljs-comment">//         { id: 123, title: "hello, world", author_id: 12 },</span>
<span class="hljs-comment">//         { id: 125, title: "howdy partner", author_id: 12 },</span>
<span class="hljs-comment">//     ],</span>
<span class="hljs-comment">//     total: 27</span>
<span class="hljs-comment">// }</span>

dataProvider(GET_ONE, <span class="hljs-string">'posts'</span>, { <span class="hljs-attr">id</span>: <span class="hljs-number">123</span> })
.then(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> <span class="hljs-built_in">console</span>.log(response));
<span class="hljs-comment">// {</span>
<span class="hljs-comment">//     data: { id: 123, title: "hello, world" }</span>
<span class="hljs-comment">// }</span>

dataProvider(CREATE, <span class="hljs-string">'posts'</span>, { <span class="hljs-attr">data</span>: { <span class="hljs-attr">title</span>: <span class="hljs-string">"hello, world"</span> } })
.then(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> <span class="hljs-built_in">console</span>.log(response));
<span class="hljs-comment">// {</span>
<span class="hljs-comment">//     data: { id: 450, title: "hello, world" }</span>
<span class="hljs-comment">// }</span>

dataProvider(UPDATE, <span class="hljs-string">'posts'</span>, {
    <span class="hljs-attr">id</span>: <span class="hljs-number">123</span>,
    <span class="hljs-attr">data</span>: { <span class="hljs-attr">title</span>: <span class="hljs-string">"hello, world!"</span> },
    <span class="hljs-attr">previousData</span>: { <span class="hljs-attr">title</span>: <span class="hljs-string">"previous title"</span> }
})
.then(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> <span class="hljs-built_in">console</span>.log(response));
<span class="hljs-comment">// {</span>
<span class="hljs-comment">//     data: { id: 123, title: "hello, world!" }</span>
<span class="hljs-comment">// }</span>

dataProvider(UPDATE_MANY, <span class="hljs-string">'posts'</span>, {
    <span class="hljs-attr">ids</span>: [<span class="hljs-number">123</span>, <span class="hljs-number">234</span>],
    <span class="hljs-attr">data</span>: { <span class="hljs-attr">views</span>: <span class="hljs-number">0</span> },
})
.then(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> <span class="hljs-built_in">console</span>.log(response));
<span class="hljs-comment">// {</span>
<span class="hljs-comment">//     data: [123, 234]</span>
<span class="hljs-comment">// }</span>

dataProvider(DELETE, <span class="hljs-string">'posts'</span>, {
    <span class="hljs-attr">id</span>: <span class="hljs-number">123</span>,
    <span class="hljs-attr">previousData</span>: { <span class="hljs-attr">title</span>: <span class="hljs-string">"hello, world!"</span> }
})
.then(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> <span class="hljs-built_in">console</span>.log(response));
<span class="hljs-comment">// {</span>
<span class="hljs-comment">//     data: { id: 123, title: "hello, world" }</span>
<span class="hljs-comment">// }</span>

dataProvider(DELETE_MANY, <span class="hljs-string">'posts'</span>, { <span class="hljs-attr">ids</span>: [<span class="hljs-number">123</span>, <span class="hljs-number">234</span>] })
.then(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> <span class="hljs-built_in">console</span>.log(response));
<span class="hljs-comment">// {</span>
<span class="hljs-comment">//     data: [123, 234]</span>
<span class="hljs-comment">// }</span>

dataProvider(GET_MANY, <span class="hljs-string">'posts'</span>, { <span class="hljs-attr">ids</span>: [<span class="hljs-number">123</span>, <span class="hljs-number">124</span>, <span class="hljs-number">125</span>] })
.then(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> <span class="hljs-built_in">console</span>.log(response));
<span class="hljs-comment">// {</span>
<span class="hljs-comment">//     data: [</span>
<span class="hljs-comment">//         { id: 123, title: "hello, world" },</span>
<span class="hljs-comment">//         { id: 124, title: "good day sunshise" },</span>
<span class="hljs-comment">//         { id: 125, title: "howdy partner" },</span>
<span class="hljs-comment">//     ]</span>
<span class="hljs-comment">// }</span>

dataProvider(GET_MANY_REFERENCE, <span class="hljs-string">'comments'</span>, {
    <span class="hljs-attr">target</span>: <span class="hljs-string">'post_id'</span>,
    <span class="hljs-attr">id</span>: <span class="hljs-number">123</span>,
    <span class="hljs-attr">sort</span>: { <span class="hljs-attr">field</span>: <span class="hljs-string">'created_at'</span>, <span class="hljs-attr">order</span>: <span class="hljs-string">'DESC'</span> }
});
.then(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> <span class="hljs-built_in">console</span>.log(response));
<span class="hljs-comment">// {</span>
<span class="hljs-comment">//     data: [</span>
<span class="hljs-comment">//         { id: 667, title: "I agree", post_id: 123 },</span>
<span class="hljs-comment">//         { id: 895, title: "I don't agree", post_id: 123 },</span>
<span class="hljs-comment">//     ],</span>
<span class="hljs-comment">//     total: 2,</span>
<span class="hljs-comment">// }</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="example-response-processing"></a><a href="#example-response-processing" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example Response Processing</h3>
<p>Let's continue with the REST backend example. This backend returns responses as follows:</p>
<pre><code class="hljs">GET http://path.<span class="hljs-keyword">to</span>.my.api/posts?sort=[<span class="hljs-string">'title'</span>,<span class="hljs-string">'ASC'</span>]&amp;range=[<span class="hljs-number">0</span>, <span class="hljs-number">4</span>]&amp;filter={author_id:<span class="hljs-number">12</span>}
Content-Range: posts <span class="hljs-number">0</span>-<span class="hljs-number">4</span>/<span class="hljs-number">27</span>
[
    { <span class="hljs-string">"id"</span>: <span class="hljs-number">126</span>, <span class="hljs-string">"title"</span>: <span class="hljs-string">"allo?"</span>, <span class="hljs-string">"author_id"</span>: <span class="hljs-number">12</span> },
    { <span class="hljs-string">"id"</span>: <span class="hljs-number">127</span>, <span class="hljs-string">"title"</span>: <span class="hljs-string">"bien le bonjour"</span>, <span class="hljs-string">"author_id"</span>: <span class="hljs-number">12</span> },
    { <span class="hljs-string">"id"</span>: <span class="hljs-number">124</span>, <span class="hljs-string">"title"</span>: <span class="hljs-string">"good day sunshine"</span>, <span class="hljs-string">"author_id"</span>: <span class="hljs-number">12</span> },
    { <span class="hljs-string">"id"</span>: <span class="hljs-number">123</span>, <span class="hljs-string">"title"</span>: <span class="hljs-string">"hello, world"</span>, <span class="hljs-string">"author_id"</span>: <span class="hljs-number">12</span> },
    { <span class="hljs-string">"id"</span>: <span class="hljs-number">125</span>, <span class="hljs-string">"title"</span>: <span class="hljs-string">"howdy partner"</span>, <span class="hljs-string">"author_id"</span>: <span class="hljs-number">12</span> }
]

GET http://path.<span class="hljs-keyword">to</span>.my.api/posts/<span class="hljs-number">123</span>
{ <span class="hljs-string">"id"</span>: <span class="hljs-number">123</span>, <span class="hljs-string">"title"</span>: <span class="hljs-string">"hello, world"</span>, <span class="hljs-string">"author_id"</span>: <span class="hljs-number">12</span> }

POST http://path.<span class="hljs-keyword">to</span>.my.api/posts
{ <span class="hljs-string">"id"</span>: <span class="hljs-number">123</span>, <span class="hljs-string">"title"</span>: <span class="hljs-string">"hello, world"</span>, <span class="hljs-string">"author_id"</span>: <span class="hljs-number">12</span> }

PUT http://path.<span class="hljs-keyword">to</span>.my.api/posts/<span class="hljs-number">123</span>
{ <span class="hljs-string">"id"</span>: <span class="hljs-number">123</span>, <span class="hljs-string">"title"</span>: <span class="hljs-string">"hello, world"</span>, <span class="hljs-string">"author_id"</span>: <span class="hljs-number">12</span> }

PATCH http://path.<span class="hljs-keyword">to</span>.my.api/posts?filter={ids:[<span class="hljs-number">123</span>,<span class="hljs-number">124</span>,<span class="hljs-number">125</span>]}
[<span class="hljs-number">123</span>, <span class="hljs-number">124</span>, <span class="hljs-number">125</span>]

DELETE http://path.<span class="hljs-keyword">to</span>.my.api/posts/<span class="hljs-number">123</span>
{ <span class="hljs-string">"id"</span>: <span class="hljs-number">123</span>, <span class="hljs-string">"title"</span>: <span class="hljs-string">"hello, world"</span>, <span class="hljs-string">"author_id"</span>: <span class="hljs-number">12</span> }

DELETE http://path.<span class="hljs-keyword">to</span>.my.api/posts?filter={ids:[<span class="hljs-number">123</span>,<span class="hljs-number">124</span>,<span class="hljs-number">125</span>]}
[<span class="hljs-number">123</span>, <span class="hljs-number">124</span>, <span class="hljs-number">125</span>]

GET http://path.<span class="hljs-keyword">to</span>.my.api/posts?filter={ids:[<span class="hljs-number">123</span>,<span class="hljs-number">124</span>,<span class="hljs-number">125</span>]}
[
    { <span class="hljs-string">"id"</span>: <span class="hljs-number">123</span>, <span class="hljs-string">"title"</span>: <span class="hljs-string">"hello, world"</span>, <span class="hljs-string">"author_id"</span>: <span class="hljs-number">12</span> },
    { <span class="hljs-string">"id"</span>: <span class="hljs-number">124</span>, <span class="hljs-string">"title"</span>: <span class="hljs-string">"good day sunshine"</span>, <span class="hljs-string">"author_id"</span>: <span class="hljs-number">12</span> },
    { <span class="hljs-string">"id"</span>: <span class="hljs-number">125</span>, <span class="hljs-string">"title"</span>: <span class="hljs-string">"howdy partner"</span>, <span class="hljs-string">"author_id"</span>: <span class="hljs-number">12</span> }
]

GET http://path.<span class="hljs-keyword">to</span>.my.api/comments?sort=[<span class="hljs-string">'created_at'</span>,<span class="hljs-string">'DESC'</span>]&amp;range=[<span class="hljs-number">0</span>, <span class="hljs-number">24</span>]&amp;filter={post_id:<span class="hljs-number">123</span>}
Content-Range: comments <span class="hljs-number">0</span>-<span class="hljs-number">1</span>/<span class="hljs-number">2</span>
[
    { <span class="hljs-string">"id"</span>: <span class="hljs-number">667</span>, <span class="hljs-string">"title"</span>: <span class="hljs-string">"I agree"</span>, <span class="hljs-string">"post_id"</span>: <span class="hljs-number">123</span> },
    { <span class="hljs-string">"id"</span>: <span class="hljs-number">895</span>, <span class="hljs-string">"title"</span>: <span class="hljs-string">"I don't agree"</span>, <span class="hljs-string">"post_id"</span>: <span class="hljs-number">123</span> }
]
</code></pre>
<p>The Data Provider must therefore transform the response from the API backend to the expected response format.</p>
<pre><code class="hljs css languages- js"><span class="hljs-comment">// in myRestProvider.js</span>
<span class="hljs-keyword">import</span> { stringify } <span class="hljs-keyword">from</span> <span class="hljs-string">'query-string'</span>;
<span class="hljs-keyword">import</span> {
    GET_LIST,
    GET_ONE,
    CREATE,
    UPDATE,
    UPDATE_MANY,
    DELETE,
    DELETE_MANY,
    GET_MANY,
    GET_MANY_REFERENCE,
} <span class="hljs-keyword">from</span> <span class="hljs-string">'react-admin'</span>;

<span class="hljs-keyword">const</span> apiUrl = <span class="hljs-string">'http://path.to.my.api/'</span>;

<span class="hljs-comment">/**
 * Maps react-admin queries to my REST API
 *
 * @param {string} type Request type, e.g GET_LIST
 * @param {string} resource Resource name, e.g. "posts"
 * @param {Object} payload Request parameters. Depends on the request type
 * @returns {Promise} the Promise for a data response
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> (type, resource, params) =&gt; {
    <span class="hljs-keyword">let</span> url = <span class="hljs-string">''</span>;
    <span class="hljs-keyword">const</span> options = { 
        <span class="hljs-attr">headers</span> : <span class="hljs-keyword">new</span> Headers({
            <span class="hljs-attr">Accept</span>: <span class="hljs-string">'application/json'</span>,
        }),
    };
    <span class="hljs-keyword">switch</span> (type) {
        <span class="hljs-comment">/* Prepare url and options as above */</span>
    }

    <span class="hljs-keyword">let</span> headers;
    <span class="hljs-keyword">return</span> fetch(url, options)
        .then(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> {
            headers = res.headers;
            <span class="hljs-keyword">return</span> res.json();
        })
        .then(<span class="hljs-function"><span class="hljs-params">json</span> =&gt;</span> {
            <span class="hljs-keyword">switch</span> (type) {
                <span class="hljs-keyword">case</span> GET_LIST:
                <span class="hljs-keyword">case</span> GET_MANY_REFERENCE:
                    <span class="hljs-keyword">if</span> (!headers.has(<span class="hljs-string">'content-range'</span>)) {
                        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(
                            <span class="hljs-string">'The Content-Range header is missing in the HTTP Response. The simple REST data provider expects responses for lists of resources to contain this header with the total number of results to build the pagination. If you are using CORS, did you declare Content-Range in the Access-Control-Expose-Headers header?'</span>
                        );
                    }
                    <span class="hljs-keyword">return</span> {
                        <span class="hljs-attr">data</span>: json,
                        <span class="hljs-attr">total</span>: <span class="hljs-built_in">parseInt</span>(
                            headers
                                .get(<span class="hljs-string">'content-range'</span>)
                                .split(<span class="hljs-string">'/'</span>)
                                .pop(),
                            <span class="hljs-number">10</span>
                        ),
                    };
                <span class="hljs-keyword">case</span> CREATE:
                    <span class="hljs-keyword">return</span> { <span class="hljs-attr">data</span>: { ...params.data, <span class="hljs-attr">id</span>: json.id } };
                <span class="hljs-keyword">default</span>:
                    <span class="hljs-keyword">return</span> { <span class="hljs-attr">data</span>: json };
            }
        });
};
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="error-format"></a><a href="#error-format" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Error Format</h3>
<p>When the API backend returns an error, the Data Provider should <code>throw</code> an <code>Error</code> object. This object should contain a <code>status</code> property with the HTTP response code (404, 500, etc.). React-admin inspects this error code, and uses it for <a href="./Authentication.md">authentication</a> (in case of 401 or 403 errors). Besides, react-admin displays the error <code>message</code> on screen in a temporary notification.</p>
<h3><a class="anchor" aria-hidden="true" id="example-implementation"></a><a href="#example-implementation" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example implementation</h3>
<p>Check the code from the <a href="https://github.com/marmelab/react-admin/blob/master/packages/ra-data-simple-rest/src/index.js">simple REST client</a>: it's a good starting point for a custom Data Provider implementation.</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/en/tutorial.html">← Tutorial</a><a class="docs-next button" href="/docs/en/admin-component.html">&lt;Admin&gt; →</a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#available-providers">Available Providers</a></li><li><a href="#usage">Usage</a></li><li><a href="#adding-custom-headers">Adding Custom Headers</a></li><li><a href="#decorating-your-data-provider-example-of-file-upload">Decorating your Data Provider (Example of File Upload)</a></li><li><a href="#writing-your-own-data-provider">Writing Your Own Data Provider</a><ul class="toc-headings"><li><a href="#request-format">Request Format</a></li><li><a href="#example-request-processing">Example Request Processing</a></li><li><a href="#response-format">Response Format</a></li><li><a href="#example-response-processing">Example Response Processing</a></li><li><a href="#error-format">Error Format</a></li><li><a href="#example-implementation">Example implementation</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/icon_common.png" alt="React-Admin" width="66" height="58"/></a><div><h5>Docs</h5><a href="/docs/en/intro.html">intro</a></div><div><h5>Community</h5><a href="#">Project Chat</a></div><div><h5>More</h5><a class="github-button" href="https://github.com/Kirk-Wang/react-admin.com.git" data-icon="octicon-star" data-count-href="#" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><section class="copyright">Copyright © 2019 react-admin.com.</section></footer></div></body></html>